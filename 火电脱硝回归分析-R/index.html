<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Regression-analysis for coal plant SCR - Nikshe's blog</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">Nikshe's blog</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Home</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documents <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li class="active">
    <a href="./">Regression-analysis for coal plant SCR</a>
</li>
                        </ul>
                    </li>
                    <li >
                        <a href="../about/">About</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="..">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../about/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#_1">火电脱硝效率回归分析</a></li>
            <li><a href="#_2">机组脱硝测点数据 相关性分析</a></li>
            <li><a href="#_3">多元回归建模</a></li>
            <li><a href="#r">加载R相关包</a></li>
            <li><a href="#_4">指定分析时段</a></li>
            <li><a href="#32a">参考业务上定义的32机组重点测点(A测)</a></li>
            <li><a href="#31a">参考业务上定义的31机组重点测点(A测)</a></li>
            <li><a href="#_5">定义获取测点数据函数</a></li>
            <li><a href="#32">读取32机组测点数据</a></li>
            <li><a href="#31">读取31机组测点数据</a></li>
            <li><a href="#opentsdb-dataframe">将从opentsdb中的测点列表数据 转化成 dataframe 数据框格式</a></li>
            <li><a href="#_6">将测点编码转换成测点名称</a></li>
            <li><a href="#_8">异常数据剔除</a></li>
            <li><a href="#32_1">32机组的多元线性回归模型</a></li>
            <li><a href="#31_1">31机组的多元线性回归模型</a></li>
            <li><a href="#32_2">32机组模型可视化</a></li>
            <li><a href="#31_2">31机组模型可视化</a></li>
            <li><a href="#_9">计算机组潜能数据</a></li>
            <li><a href="#_10">字段还原英文显示</a></li>
            <li><a href="#32_3">32机组的潜能概率密度分布图</a></li>
            <li><a href="#32_4">32机组潜能分布散点图和趋势线</a></li>
            <li><a href="#31_3">31机组潜能概率分布图</a></li>
            <li><a href="#31_4">31机组潜能分布散点图和趋势线</a></li>
            <li><a href="#_11">将两个机组的潜能数据进行合并显示</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h2 id="_1">火电脱硝效率回归分析</h2>
<h3 id="_2">机组脱硝测点数据 相关性分析</h3>
<h3 id="_3">多元回归建模</h3>
<h3 id="r">加载R相关包</h3>
<pre><code class="R">library(opentsdbr)
library(tidyr)
library(dplyr)
library(magrittr)
library(corrplot)
library(ggplot2)
library(reshape2)
library(TTR)
</code></pre>

<h3 id="_4">指定分析时段</h3>
<pre><code class="R">inter &lt;- interval(ymd_hms(&quot;2014-01-01 00:00:00&quot;), ymd_hms(&quot;2018-08-01 11:59:59&quot;))
</code></pre>

<h3 id="32a">参考业务上定义的32机组重点测点(A测)</h3>
<pre><code class="R">tagcodes_32 &lt;- as.list(c(
  '08ksci008_2a', #机组负荷
  'unitcoalflo_2a', #机组总煤量
  #'2coalbsavg_c', #发电煤耗
  '08fsaeu60c_2a', #一次风温度
  '08frate76d_2a', #A侧空预器出口二次风温
  '08hsa10cq101b_2a', #A侧反应器入口O2含量
  #'08ascr_nox_set_2a', #A侧反应器出口NOx设定
  #'08ascr_xl_set_2a', #A侧反应器脱硝率设定
  '08bakai001_2a', #A侧反应器入口NH3流量
  '08xiaolva_2a', #A侧反应器脱硝率
  '08bakai008_2a', #A侧反应器入口NOx
  '08bakai006_2a', #A侧反应器出口NOx
  '08hsa10cq105_2a', #A侧反应器出口NH3逃逸
  '08hsd10dp101_2a', #A侧催化剂层压差
  #'33hta00cq004_t1a', #出口烟尘浓度
  '08ftaan001xb13_2a' #引风机A电机电流
  #'33fgd2rtu-ao3_t1a' #入口烟气量
))
</code></pre>

<h3 id="31a">参考业务上定义的31机组重点测点(A测)</h3>
<pre><code class="R">tagcodes_31 &lt;- as.list(c(
  '07gevji001_c18_1a', #机组负荷
  'unitcoalflo_1a', #机组总煤量
  #'1coalbsavg_c', #发电煤耗
  '07fsaeu60c_1a', #一次风温度
  '07frate76d_1a', #A侧空预器出口二次风温
  '07hsa10cq101b_1a', #A侧反应器入口O2含量
  #'07ascr_nox_set_1a', #A侧反应器出口NOx设定
  #'07ascr_xl_set_1a', #A侧反应器脱硝率设定
  '07bakai001_1a', #A侧反应器入口NH3流量
  '07xiaolva_1a', #A侧反应器脱硝率
  '07bakai008_1a', #A侧反应器入口NOx
  '07bakai006_1a', #A侧反应器出口NOx
  '07hsa10cq105_1a', #A侧反应器出口NH3逃逸
  '07hsd10dp101_1a', #A侧催化剂层压差
  #'33hta00cq004_t1a', #出口烟尘浓度
  '07ftaan001xb13_1a' #引风机A电机电流
  #'33fgd2rtu-ao3_t1a' #入口烟气量
))
</code></pre>

<h3 id="_5">定义获取测点数据函数</h3>
<pre><code class="R">get_tag_info_from_opentsdb &lt;- function(code,ag,ds,hs='xxxx',port=14242){
  result &lt;- try(tsd_get(metric = code,inter,agg=ag,hostname = hs ,port=port,downsample = ds))
  if ('try-error' %in% class(result)) {
    message(&quot;测点：&quot;,code,&quot; 无数据&quot;)
    # 部分测点数据为空
    return(NULL)
  }else{
    # 行列转换
    tmp &lt;- dcast(result[,1:3],timestamp~metric)
    return(tmp)
  }
}
</code></pre>

<h3 id="32">读取32机组测点数据</h3>
<pre><code class="R">tagdata_32 &lt;- lapply(tagcodes_32,
                     get_tag_info_from_opentsdb,
                     ag='zimsum',
                     ds &lt;- '1h-avg-zero',
                     hs='cdh-2')
</code></pre>

<h3 id="31">读取31机组测点数据</h3>
<pre><code class="R">tagdata_31 &lt;- lapply(tagcodes_31,
                     get_tag_info_from_opentsdb,
                     ag='zimsum',
                     ds &lt;- '1h-avg-zero',
                     hs='cdh-2')
</code></pre>

<h3 id="opentsdb-dataframe">将从opentsdb中的测点列表数据 转化成 dataframe 数据框格式</h3>
<pre><code class="R">df_tagdata_32 &lt;- reshape::merge_recurse(tagdata_32);
df_tagdata_31 &lt;- reshape::merge_recurse(tagdata_31)
</code></pre>

<h3 id="_6">将测点编码转换成测点名称</h3>
<pre><code class="R">tag_names_cn &lt;- c('机组负荷',
                  '机组总煤量',
                  #'发电煤耗',
                  '一次风温度',
                  'A侧空预器出口二次风温',
                  'A侧反应器入口O2含量',
                  #'A侧反应器出口NOx设定',
                  #'A侧反应器脱硝率设定',
                  'A侧反应器入口NH3流量',
                  'A侧反应器脱硝率',
                  'A侧反应器入口NOx',
                  'A侧反应器出口NOx',
                  'A侧反应器出口NH3逃逸',
                  'A侧催化剂层压差',
                  #'出口烟尘浓度',
                  '引风机A电机电流'
                  #,'入口烟气量'
                  )
names(df_tagdata_32)[-1] &lt;- tag_names_cn
names(df_tagdata_31)[-1] &lt;- tag_names_cn
</code></pre>

<h4 id="_7">数据框描述性统计</h4>
<pre><code class="R">summary(df_tagdata_32)
</code></pre>

<pre><code>   timestamp                      机组负荷     机组总煤量    一次风温度 
 Min.   :2014-01-01 00:00:00   Min.   : -1   Min.   :  0   Min.   :  0  
 1st Qu.:2015-02-23 08:45:00   1st Qu.:  0   1st Qu.:  0   1st Qu.: 19  
 Median :2016-04-16 17:30:00   Median : 90   Median : 52   Median :223  
 Mean   :2016-04-16 17:30:00   Mean   :121   Mean   : 39   Mean   :150  
 3rd Qu.:2017-06-09 02:15:00   3rd Qu.:225   3rd Qu.: 65   3rd Qu.:276  
 Max.   :2018-08-01 11:00:00   Max.   :661   Max.   :296   Max.   :328  
 A侧空预器出口二次风温 A侧反应器入口O2含量 A侧反应器入口NH3流量 A侧反应器脱硝率
 Min.   :-73           Min.   :  0         Min.   :  0          Min.   :  0    
 1st Qu.: 22           1st Qu.:  5         1st Qu.:  0          1st Qu.:  0    
 Median :196           Median :  6         Median : 45          Median : 40    
 Mean   :151           Mean   : 17         Mean   : 47          Mean   : 40    
 3rd Qu.:277           3rd Qu.: 21         3rd Qu.: 81          3rd Qu.: 82    
 Max.   :366           Max.   :297         Max.   :226          Max.   :100    
 A侧反应器入口NOx A侧反应器出口NOx A侧反应器出口NH3逃逸 A侧催化剂层压差
 Min.   :  -8     Min.   : -5      Min.   :  0          Min.   : -1    
 1st Qu.:   0     1st Qu.:  0      1st Qu.:  0          1st Qu.: 10    
 Median :   0     Median :  3      Median :  0          Median :192    
 Mean   : 329     Mean   : 55      Mean   :  8          Mean   :125    
 3rd Qu.: 544     3rd Qu.:105      3rd Qu.:  1          3rd Qu.:218    
 Max.   :4332     Max.   :772      Max.   :473          Max.   :356    
 引风机A电机电流
 Min.   :-75    
 1st Qu.: -2    
 Median :  0    
 Mean   : 50    
 3rd Qu.: 96    
 Max.   :225
</code></pre>
<pre><code class="R">summary(df_tagdata_31)
</code></pre>

<pre><code>   timestamp                      机组负荷     机组总煤量    一次风温度 
 Min.   :2014-01-01 00:00:00   Min.   :  0   Min.   :  0   Min.   :  0  
 1st Qu.:2015-02-23 08:45:00   1st Qu.:  0   1st Qu.:  0   1st Qu.: 13  
 Median :2016-04-16 17:30:00   Median :  0   Median :  0   Median : 23  
 Mean   :2016-04-16 17:30:00   Mean   : 71   Mean   : 19   Mean   : 95  
 3rd Qu.:2017-06-09 02:15:00   3rd Qu.:207   3rd Qu.: 57   3rd Qu.:267  
 Max.   :2018-08-01 11:00:00   Max.   :334   Max.   :106   Max.   :323  
 A侧空预器出口二次风温 A侧反应器入口O2含量 A侧反应器入口NH3流量 A侧反应器脱硝率
 Min.   :-71           Min.   : 0.0        Min.   :  0          Min.   :  0    
 1st Qu.: 19           1st Qu.: 5.3        1st Qu.:  0          1st Qu.:  0    
 Median : 28           Median :21.0        Median :  0          Median :  0    
 Mean   :100           Mean   :13.5        Mean   : 31          Mean   : 24    
 3rd Qu.:272           3rd Qu.:21.0        3rd Qu.: 70          3rd Qu.: 81    
 Max.   :330           Max.   :23.6        Max.   :213          Max.   :100    
 A侧反应器入口NOx A侧反应器出口NOx A侧反应器出口NH3逃逸 A侧催化剂层压差
 Min.   :  -5     Min.   : -1      Min.   :-0.2         Min.   : -6    
 1st Qu.:   0     1st Qu.:  0      1st Qu.: 0.0         1st Qu.: -5    
 Median :   0     Median :  0      Median : 0.4         Median :  0    
 Mean   : 231     Mean   : 40      Mean   : 0.5         Mean   : 66    
 3rd Qu.: 580     3rd Qu.:105      3rd Qu.: 0.8         3rd Qu.:191    
 Max.   :2075     Max.   :880      Max.   : 9.3         Max.   :331    
 引风机A电机电流
 Min.   :-75    
 1st Qu.:  0    
 Median :  0    
 Mean   : 32    
 3rd Qu.: 94    
 Max.   :206
</code></pre>
<h3 id="_8">异常数据剔除</h3>
<pre><code class="R">filtered_31_df &lt;- filter(df_tagdata_31,机组负荷&gt;200 &amp; 机组总煤量&gt;50 &amp; 一次风温度&gt;250&amp; A侧空预器出口二次风温&gt;250&amp; A侧反应器入口NH3流量&gt;50 &amp; A侧反应器脱硝率&gt;75) 

filtered_32_df &lt;- filter(df_tagdata_32,机组负荷&gt;200 &amp; 机组总煤量&gt;50 &amp; 一次风温度&gt;250&amp; A侧空预器出口二次风温&gt;250&amp; A侧反应器入口NH3流量&gt;50 &amp; A侧反应器脱硝率&gt;75) 
</code></pre>

<h3 id="32_1">32机组的多元线性回归模型</h3>
<pre><code class="R">model_32 &lt;- lm(A侧反应器脱硝率 ~ 
                机组负荷 +
                #机组总煤量 +
                一次风温度 +
                #A侧空预器出口二次风温 +
                #A侧反应器入口O2含量 +
                A侧反应器入口NH3流量 +
                #A侧反应器入口NOx +
                A侧反应器出口NOx +
                A侧反应器出口NH3逃逸 +
                A侧催化剂层压差 
                #引风机A电机电流 
              ,data = filtered_32_df)
</code></pre>

<h3 id="31_1">31机组的多元线性回归模型</h3>
<pre><code class="R">model_31 &lt;- lm(A侧反应器脱硝率 ~ 
                 机组负荷 +
                 #机组总煤量 +
                 一次风温度 +
                 #A侧空预器出口二次风温 +
                 #A侧反应器入口O2含量 +
                 A侧反应器入口NH3流量 +
                 #A侧反应器入口NOx +
                 A侧反应器出口NOx +
                 A侧反应器出口NH3逃逸 +
                 A侧催化剂层压差 
                 #引风机A电机电流 
               ,data = filtered_31_df)
</code></pre>

<h3 id="32_2">32机组模型可视化</h3>
<pre><code class="R">par(mfrow=c(2,2))
plot(model_32)
</code></pre>

<p><img alt="png" src="../output_29_0.png" /></p>
<h3 id="31_2">31机组模型可视化</h3>
<pre><code class="R">par(mfrow=c(2,2))
plot(model_31)
</code></pre>

<p><img alt="png" src="../output_31_0.png" /></p>
<h3 id="_9">计算机组潜能数据</h3>
<pre><code class="R">generate_qn &lt;- function(df_tagdata){
  options(digits = 2)
  ## 计算氨氮摩尔比
  df_tagdata_mr_new &lt;- mutate(df_tagdata,
                             #氨氮摩尔比=A侧反应器脱硝率/100 + 2.7*(A侧反应器入口NH3流量/A侧反应器入口NOx)
                             氨氮摩尔比=A侧反应器脱硝率/100 + 2.7*((A侧反应器出口NH3逃逸*17/22.4)/A侧反应器入口NOx))
  # 计算每个小时的潜能数据
  df_tagdata_qn &lt;- mutate(df_tagdata_mr_new,
                             催化剂潜能=0.5*log(氨氮摩尔比/((氨氮摩尔比-A侧反应器脱硝率/100)*(1-A侧反应器脱硝率/100))))
  return(df_tagdata_qn)
}
df_tagdata_32_qn &lt;- generate_qn(filtered_32_df)
df_tagdata_31_qn &lt;- generate_qn(filtered_31_df)
</code></pre>

<pre><code class="R">tail(df_tagdata_32_qn)
</code></pre>

<table>
<thead><tr><th></th><th scope=col>timestamp</th><th scope=col>机组负荷</th><th scope=col>机组总煤量</th><th scope=col>一次风温度</th><th scope=col>A侧空预器出口二次风温</th><th scope=col>A侧反应器入口O2含量</th><th scope=col>A侧反应器入口NH3流量</th><th scope=col>A侧反应器脱硝率</th><th scope=col>A侧反应器入口NOx</th><th scope=col>A侧反应器出口NOx</th><th scope=col>A侧反应器出口NH3逃逸</th><th scope=col>A侧催化剂层压差</th><th scope=col>引风机A电机电流</th><th scope=col>氨氮摩尔比</th><th scope=col>催化剂潜能</th></tr></thead>
<tbody>
    <tr><th scope=row>14576</th><td>2018-08-01 06:00:00</td><td>211                </td><td>59                 </td><td>294                </td><td>295                </td><td>5.5                </td><td>77                 </td><td>80                 </td><td>570                </td><td>114                </td><td>0.74               </td><td>242                </td><td> 99                </td><td>0.80               </td><td>3.7                </td></tr>
    <tr><th scope=row>14577</th><td>2018-08-01 07:00:00</td><td>211                </td><td>59                 </td><td>295                </td><td>296                </td><td>5.4                </td><td>76                 </td><td>79                 </td><td>559                </td><td>115                </td><td>0.34               </td><td>239                </td><td>100                </td><td>0.79               </td><td>4.0                </td></tr>
    <tr><th scope=row>14578</th><td>2018-08-01 08:00:00</td><td>211                </td><td>59                 </td><td>295                </td><td>296                </td><td>5.2                </td><td>78                 </td><td>80                 </td><td>568                </td><td>114                </td><td>0.50               </td><td>235                </td><td> 99                </td><td>0.80               </td><td>3.9                </td></tr>
    <tr><th scope=row>14579</th><td>2018-08-01 09:00:00</td><td>212                </td><td>58                 </td><td>295                </td><td>296                </td><td>5.3                </td><td>78                 </td><td>81                 </td><td>566                </td><td>108                </td><td>0.43               </td><td>235                </td><td> 99                </td><td>0.81               </td><td>4.0                </td></tr>
    <tr><th scope=row>14580</th><td>2018-08-01 10:00:00</td><td>212                </td><td>58                 </td><td>293                </td><td>294                </td><td>5.1                </td><td>76                 </td><td>81                 </td><td>547                </td><td>104                </td><td>0.59               </td><td>233                </td><td> 99                </td><td>0.81               </td><td>3.8                </td></tr>
    <tr><th scope=row>14581</th><td>2018-08-01 11:00:00</td><td>212                </td><td>57                 </td><td>291                </td><td>292                </td><td>5.3                </td><td>77                 </td><td>81                 </td><td>550                </td><td>107                </td><td>0.75               </td><td>232                </td><td> 99                </td><td>0.81               </td><td>3.7                </td></tr>
</tbody>
</table>

<h3 id="_10">字段还原英文显示</h3>
<pre><code class="R">tag_names_cn &lt;- c('jzfh',
                  'jzzm',
                  'ycfwd',
                  'A_kyqecfwd',
                  'A_o2',
                  'A_NH3',
                  'A_xl',
                  'A_rk_NOx',
                  'A_ck_NOx',
                  'A_ty_NH3',
                  'A_yc',
                  'A_yfjdl',
                  'A_mr',
                  'A_qn'
                  )
names(df_tagdata_32_qn)[-1] &lt;- tag_names_cn
names(df_tagdata_31_qn)[-1] &lt;- tag_names_cn
head(df_tagdata_32_qn)
</code></pre>

<table>
<thead><tr><th scope=col>timestamp</th><th scope=col>jzfh</th><th scope=col>jzzm</th><th scope=col>ycfwd</th><th scope=col>A_kyqecfwd</th><th scope=col>A_o2</th><th scope=col>A_NH3</th><th scope=col>A_xl</th><th scope=col>A_rk_NOx</th><th scope=col>A_ck_NOx</th><th scope=col>A_ty_NH3</th><th scope=col>A_yc</th><th scope=col>A_yfjdl</th><th scope=col>A_mr</th><th scope=col>A_qn</th></tr></thead>
<tbody>
    <tr><td>2014-01-01 00:00:00</td><td>242                </td><td>74                 </td><td>281                </td><td>284                </td><td>5.9                </td><td>110                </td><td>82                 </td><td>0                  </td><td>131                </td><td>0.0036             </td><td>238                </td><td>103                </td><td>Inf                </td><td>NaN                </td></tr>
    <tr><td>2014-01-01 01:00:00</td><td>242                </td><td>74                 </td><td>280                </td><td>282                </td><td>5.6                </td><td>110                </td><td>82                 </td><td>0                  </td><td>129                </td><td>0.0657             </td><td>232                </td><td>100                </td><td>Inf                </td><td>NaN                </td></tr>
    <tr><td>2014-01-01 02:00:00</td><td>242                </td><td>74                 </td><td>282                </td><td>283                </td><td>5.5                </td><td>109                </td><td>82                 </td><td>0                  </td><td>128                </td><td>0.7654             </td><td>231                </td><td>100                </td><td>Inf                </td><td>NaN                </td></tr>
    <tr><td>2014-01-01 03:00:00</td><td>242                </td><td>73                 </td><td>283                </td><td>285                </td><td>5.4                </td><td>108                </td><td>82                 </td><td>0                  </td><td>130                </td><td>0.8523             </td><td>233                </td><td>100                </td><td>Inf                </td><td>NaN                </td></tr>
    <tr><td>2014-01-01 04:00:00</td><td>242                </td><td>72                 </td><td>285                </td><td>288                </td><td>5.4                </td><td>107                </td><td>82                 </td><td>0                  </td><td>132                </td><td>0.4474             </td><td>232                </td><td>100                </td><td>Inf                </td><td>NaN                </td></tr>
    <tr><td>2014-01-01 05:00:00</td><td>242                </td><td>72                 </td><td>287                </td><td>289                </td><td>5.4                </td><td>106                </td><td>82                 </td><td>0                  </td><td>133                </td><td>0.0498             </td><td>235                </td><td>101                </td><td>Inf                </td><td>NaN                </td></tr>
</tbody>
</table>

<h3 id="32_3">32机组的潜能概率密度分布图</h3>
<pre><code class="R">ggplot(df_tagdata_32_qn) + 
  geom_density(aes(x=A_qn)) 
</code></pre>

<p><img alt="png" src="../output_38_2.png" /></p>
<h3 id="32_4">32机组潜能分布散点图和趋势线</h3>
<pre><code class="R">ggplot(df_tagdata_32_qn,aes(x=timestamp,y=A_qn)) + 
  geom_point(color = &quot;rosybrown2&quot;) +
  geom_smooth(method=&quot;lm&quot;,color = &quot;darkblue&quot;)
</code></pre>

<p><img alt="png" src="../output_40_2.png" /></p>
<h3 id="31_3">31机组潜能概率分布图</h3>
<pre><code class="R">ggplot(df_tagdata_31_qn) + 
  geom_density(aes(x=A_qn))
</code></pre>

<p><img alt="png" src="../output_42_2.png" /></p>
<h3 id="31_4">31机组潜能分布散点图和趋势线</h3>
<pre><code class="R">ggplot(df_tagdata_31_qn,aes(x=timestamp,y=A_qn)) + 
  geom_point(color = &quot;seagreen3&quot;) +
  geom_smooth(method=&quot;lm&quot;,color = &quot;darkred&quot;)
</code></pre>

<p><img alt="png" src="../output_44_2.png" /></p>
<h3 id="_11">将两个机组的潜能数据进行合并显示</h3>
<pre><code class="R">ggplot() + 
  geom_point(data = df_tagdata_32_qn,aes(x=timestamp,y=A_qn), color = &quot;rosybrown2&quot;,alpha=.4) + 
  geom_point(data = df_tagdata_31_qn,aes(x=timestamp,y=A_qn), color = &quot;seagreen3&quot;,alpha=.4) +
  geom_smooth(data=df_tagdata_32_qn,method=&quot;lm&quot;,aes(x=timestamp,y=A_qn),color = &quot;darkblue&quot;) +
  geom_smooth(data=df_tagdata_31_qn,method=&quot;lm&quot;,aes(x=timestamp,y=A_qn),color = &quot;darkred&quot;)
</code></pre>

<p><img alt="png" src="../output_46_2.png" /></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
